#!/bin/bash

prf() { printf %s\\n "$*" ; }

s="0"; gpu="0"; max_t="0"; tdiff="0"; display=""; new_spd="0"; num_gpus="0"
num_fans="0"; tdiff_avg="0"; current_t="0"; check_diff=""; check_diff2=""
fcurve_len="0"; num_gpus_loop="0"; declare -a old_t=(); declare -a exp_sp=()
#gpu_cmd="nvidia-settings"
gpu_cmd="/home/scott/Projects/nssim/nssim nvidia-settings"

prf "
###########################################
#     nan0s7's fan speed curve script     #
###########################################
"
usage="Usage: $(basename "$0") [OPTION]...

where:
-h  show this help text
-c  configuration file (default: $PWD/config)
-d  display device string (e.g. \":0\", \"CRT-0\"), defaults to auto detection"

target=$0 fname= config_file= CDPATH=
{ \unalias command; \unset -f command; } >/dev/null 2>&1
[ -n "$ZSH_VERSION" ] && options[POSIX_BUILTINS]=on
while :; do
	[ -L "$target" ] || [ -e "$target" ] || {
